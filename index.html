<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <title>Insecurity Insight Dashboard</title>
    <!-- Bootstrap CSS (v5) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" crossorigin=""/>
    <!-- MarkerCluster CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />
    <!-- Chosen CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.7/chosen.min.css" />
    <!-- Treeselect CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/treeselectjs@0.12.3/dist/treeselectjs.css" />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
    <!-- Font Awesome for the Reset Button -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Remove bold from dataset labels */
        .dataset-label {
            font-weight: normal;
            display: inline-block;
            padding: 3px 8px;
            margin-left: 5px;
            border-radius: 4px;
            color: #fff;
        }
        .dataset-aidworkers { background-color: #66c2a5; }
        .dataset-weapons   { background-color: #fc8d62; }
        .dataset-crsv      { background-color: #8da0cb; }

        /* Ensure left panel scrolls */
        #left-panel {
            max-height: 100vh;
            overflow-y: auto;
        }

        /* Style for the Treeselect container */
        #combinedFilter {
            border: 1px solid #ddd;
            padding: 5px;
            border-radius: 4px;
            background: #fff;
            margin-bottom: 15px;
        }

    </style>
</head>
<body>
<div id="dashboard" class="d-flex">
    <!-- Left Panel: Filters and Chart -->
    <div id="left-panel" class="p-3" style="width: 35%; background-color: #f9f9f9;">
        <h1 class="text-center">Insecurity Insight<br>Dashboard</h1>

        <div id="filters" class="mt-3">
            <!-- Unified Hierarchical Filter -->
            <div class="filter-group">
                <label for="combinedFilter">Select Datasets:</label>
                <div id="combinedFilter"></div>
            </div>

            <!-- Date Range -->
            <div class="filter-group mt-3 row">
                <div class="col">
                    <label for="startDate">Start Date:</label>
                    <input type="date" id="startDate" class="form-control">
                </div>
                <div class="col">
                    <label for="endDate">End Date:</label>
                    <input type="date" id="endDate" class="form-control">
                </div>
            </div>
        </div>

        <!-- Add the notes container here -->

        <div id="data-notes" class="mt-3" style="font-size: 0.9rem; color: grey;"></div>


        <!-- Bar Chart Section -->
        <div id="barChart" class="mt-3">
            <h2 id="barChartHeader"></h2>
            <div id="chartContainer"></div>
        </div>
    </div>

    <!-- Right Panel: Map -->
    <div id="right-panel" style="width: 100%; position: relative;">
        <div id="map" style="width: 100%; height: 100vh;"></div>
    </div>
</div>

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- Bootstrap Bundle JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" crossorigin=""></script>
<!-- MarkerCluster JS -->
<script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
<!-- D3 JS -->
<script src="https://d3js.org/d3.v7.min.js"></script>
<!-- Chosen JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.7/chosen.jquery.min.js"></script>
<!-- Treeselect UMD JS -->
<script src="https://cdn.jsdelivr.net/npm/treeselectjs@0.12.3/dist/treeselectjs.umd.js"></script>
<!-- Main JS (entry point) -->
<script type="module" src="js/main.js"></script>

<div class="tooltip"></div>

</body>
</html>
